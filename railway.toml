[build]
builder = "NIXPACKS"
buildCommand = "corepack enable && corepack pnpm run build:api"
watchPatterns = [
  "apps/api/**",
  "packages/shared/**",
  "package.json",
  "pnpm-lock.yaml",
  "pnpm-workspace.yaml",
  "tsconfig.base.json",
  "railway.toml",
  "nixpacks.toml"
]

[deploy]
startCommand = "node apps/api/dist/server.js"
healthcheckPath = "/api/v1/health"
healthcheckTimeout = 120
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
